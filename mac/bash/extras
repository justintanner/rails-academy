alias ff="fzf --preview 'bat --style=numbers --color=always {}'"
# fd is covered by the homebrew package fd, no alias needed, unsetting omkaub alias
unalias fd

# If for some reason zoxide is not installed, then unset the cd alias
if ! command -v z &> /dev/null; then
  unalias cd
fi

# Tels mac terminal to supress the convert to zsh warning message.
export BASH_SILENCE_DEPRECATION_WARNING=1

export RAILS_ACADEMY_PATH="/home/$USER/.local/share/rails-academy"

# Add homebrew to the path
export PATH="$PATH:/usr/local/bin:/usr/local/sbin:/opt/homebrew/bin:/opt/homebrew/sbin"

# Set complete path
export PATH="./bin:$HOME/.local/bin:$HOME/.local/share/rails-academy/bin:$PATH"

export RA_COLOR_MODE="light"

# Update the PATH for the current shell session.
set +h

# Tell Mise to automatically load the .env when you enter that directory.
export MISE_ENV_FILE=.env

type fzf &>/dev/null && eval "$(fzf --bash)"

# Check if $HOME/.alacritty.yml exists and contains the word zellij
ALACRITTY_IN_ZELLIJ=$( [ -f "$HOME/.alacritty.yml" ] && awk '/zellij/ {found=1} END {if (found) print "true"}' "$HOME/.alacritty.yml" || echo "" )

if [ "$TERM" = "xterm-256color" ] && [ ! $ALACRITTY_IN_ZELLIJ ]; then
  if [ -f "$(brew --prefix)/opt/bash-git-prompt/share/gitprompt.sh" ]; then
    __GIT_PROMPT_DIR=$(brew --prefix)/opt/bash-git-prompt/share
    if [ "$RA_COLOR_MODE" = "light" ]; then
      GIT_PROMPT_THEME=Solarized_Ubuntu
    else
      GIT_PROMPT_THEME=Solarized_Ubuntu_Dark
    fi
    source "$(brew --prefix)/opt/bash-git-prompt/share/gitprompt.sh"
  fi
fi

if command -v terraform &> /dev/null; then
   complete -C /opt/homebrew/bin/terraform terraform
fi

if command -v mise &> /dev/null; then
  echo Re-activating mise..."
  eval "$(mise activate bash)"
fi
